<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Quiz Results</title>
    <link rel="stylesheet" href="results_styles.css">
    <script src="results.js" defer></script>
</head>
<body>

    <div class="results-container">
        
        <!-- Left Panel: Written Profile -->
        <div class="text-panel">
            <h1>Your Primary Archetype: <span id="primary-archetype"></span></h1>
            <p id="archetype-description"></p>

            <h2>Secondary Influence:</h2>
            <p class="secondary-archetype" id="secondary-archetype"></p>

            <h2>Affirming Message</h2>
            <p id="affirming-message"></p>

            <h2>Personalized Insights</h2>
            <p id="personalized-insights"></p>

            <!-- Reflection Questions -->
            <div class="reflection-questions">
                <h2>Self-Reflection Questions</h2>
                <ul id="reflection-list"></ul>
            </div>

            <!-- Button Options -->
            <div class="button-container">
                <button id="export-pdf">Download PDF</button>
                <button id="email-results">Email Results</button>
            </div>
        </div>

        <!-- Right Panel: Visual Representation -->
        <div class="visual-panel">
            <h2>Archetype Preference Breakdown</h2>
            <canvas id="spider-graph"></canvas>
        </div>
    </div>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        console.log("üìå Results Page Loaded!");

        const primaryArchetypeElement = document.getElementById("primary-archetype");
        const secondaryArchetypeElement = document.getElementById("secondary-archetype");
        const archetypeDescriptionElement = document.getElementById("archetype-description");
        const affirmingMessageElement = document.getElementById("affirming-message");
        const personalizedInsightsElement = document.getElementById("personalized-insights");
        const reflectionListElement = document.getElementById("reflection-list");

      // üîç Retrieve saved results from sessionStorage
const savedResults = sessionStorage.getItem("quizResults");

if (savedResults) {
    const archetypes = JSON.parse(savedResults);
    console.log("üèÜ Retrieved Quiz Results:", archetypes);

    if (!archetypes || archetypes.length === 0 || archetypes[0] === "undefined") {
        console.error("‚ùå Error: No valid quiz results found. Please retake the quiz.");
        primaryArchetypeElement.innerText = "Error: No Results Found";
        return;
    }

    primaryArchetypeElement.innerText = archetypes[0] || "Unknown";
    secondaryArchetypeElement.innerText = archetypes[1] || "None";

    // ‚úÖ Fetch additional details based on the results
    fetch("quiz_data.json")
        .then(response => response.json())
        .then(data => {
            if (!data.archetypes || !data.archetypes[archetypes[0]]) {
                console.warn("‚ö†Ô∏è Archetype details not found in JSON.");
                return;
            }

            const archetypeDetails = data.archetypes[archetypes[0]];
            archetypeDescriptionElement.innerText = archetypeDetails.description || "No description available.";
            affirmingMessageElement.innerText = archetypeDetails.affirmation || "You are uniquely powerful!";
            personalizedInsightsElement.innerText = archetypeDetails.insights || "Explore your strengths!";
        })
        .catch(error => console.error("‚ùå Error loading archetype details:", error));

} else {
    console.error("‚ùå No quiz results found in sessionStorage.");
    primaryArchetypeElement.innerText = "Error: No Results Found";
}

</script>



</body>
</html>
